<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="4552px" preserveAspectRatio="none" style="width:2174px;height:4552px;background:#FFFFFF;" version="1.1" viewBox="0 0 2174 4552" width="2174px" zoomAndPan="magnify"><title>Enhanced WebTransport Graceful Shutdown Phase</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="627.7412" x="771.678" y="37.1182">Enhanced WebTransport Graceful Shutdown Phase</text><g><title>Client</title><rect fill="#FFFFFF" height="1842.845" style="stroke:#000000;stroke-width:1;" width="10" x="305.9468" y="443.2434"/></g><g><title>Client</title><rect fill="#FFFFFF" height="722.7788" style="stroke:#000000;stroke-width:1;" width="10" x="570.0938" y="1022.126"/></g><g><title>QUIC</title><rect fill="#FFFFFF" height="1189.8655" style="stroke:#000000;stroke-width:1;" width="10" x="761.1602" y="2626.2788"/></g><g><title>QUIC</title><rect fill="#FFFFFF" height="1102.3672" style="stroke:#000000;stroke-width:1;" width="10" x="1271.7271" y="2467.7839"/></g><g><title>Server</title><rect fill="#FFFFFF" height="558.1836" style="stroke:#000000;stroke-width:1;" width="10" x="1611.8809" y="1299.7178"/></g><g><title>Server</title><rect fill="#FFFFFF" height="1631.7515" style="stroke:#000000;stroke-width:1;" width="10" x="1802.9473" y="728.7349"/></g><g><title>Client App</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="45.0562" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="49" x2="49" y1="130.752" y2="4470.8228"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="146.1802" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="149.6211" x2="149.6211" y1="130.752" y2="4470.8228"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="306.9468" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="310.4028" x2="310.4028" y1="130.752" y2="4470.8228"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="571.0938" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="575.0376" x2="575.0376" y1="130.752" y2="4470.8228"/></g><g><title>QUIC</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="762.1602" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="765.9902" x2="765.9902" y1="130.752" y2="4470.8228"/></g><g><title>Network</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="1102.314" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="1106.0425" x2="1106.0425" y1="130.752" y2="4470.8228"/></g><g><title>QUIC</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="1272.7271" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="1276.5571" x2="1276.5571" y1="130.752" y2="4470.8228"/></g><g><title>Server</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="1612.8809" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="1616.8247" x2="1616.8247" y1="130.752" y2="4470.8228"/></g><g><title>Server</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="1803.9473" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="1807.4033" x2="1807.4033" y1="130.752" y2="4470.8228"/></g><g><title>Server</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="1967.7188" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="1971.1597" x2="1971.1597" y1="130.752" y2="4470.8228"/></g><g><title>Server</title><rect fill="#000000" fill-opacity="0.00000" height="4340.0708" width="8" x="2113.1177" y="130.752"/><line style="stroke:#000000;stroke-width:1;" x1="2116.1382" x2="2116.1382" y1="130.752" y2="4470.8228"/></g><g class="participant participant-head" data-participant="ClientApp"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72.1123" x="10" y="127.8125">Client App</text><ellipse cx="49.0562" cy="61.7373" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M49.0562,69.7373 L49.0562,96.7373 M36.0562,77.7373 L62.0562,77.7373 M49.0562,96.7373 L36.0562,111.7373 M49.0562,96.7373 L62.0562,111.7373" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="ClientApp"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72.1123" x="10" y="4483.8979">Client App</text><ellipse cx="49.0562" cy="4495.8374" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M49.0562,4503.8374 L49.0562,4530.8374 M36.0562,4511.8374 L62.0562,4511.8374 M49.0562,4530.8374 L36.0562,4545.8374 M49.0562,4530.8374 L62.0562,4545.8374" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="ClientCtrl"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.1182" x="108.6211" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="130.0928" y="102.7979">Client</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.1182" x="115.6211" y="119.8125">Controller</text></g><g class="participant participant-tail" data-participant="ClientCtrl"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.1182" x="108.6211" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="130.0928" y="4490.8979">Client</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.1182" x="115.6211" y="4507.9126">Controller</text></g><g class="participant participant-head" data-participant="ClientWTSession"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="95.0879" x="263.4028" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="290.8594" y="102.7979">Client</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.0879" x="270.4028" y="119.8125">WT Session</text></g><g class="participant participant-tail" data-participant="ClientWTSession"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="95.0879" x="263.4028" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="290.8594" y="4490.8979">Client</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.0879" x="270.4028" y="4507.9126">WT Session</text></g><g class="participant participant-head" data-participant="ClientStreams"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.1123" x="525.0376" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="555.0063" y="102.7979">Client</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.1123" x="532.0376" y="119.8125">WT Streams</text></g><g class="participant participant-tail" data-participant="ClientStreams"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.1123" x="525.0376" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.1748" x="555.0063" y="4490.8979">Client</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.1123" x="532.0376" y="4507.9126">WT Streams</text></g><g class="participant participant-head" data-participant="ClientConn"><rect fill="#FFFFFF" height="65.0439" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.3398" x="719.9902" y="64.708"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.9346" x="747.6929" y="85.7832">QUIC</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.3398" x="726.9902" y="102.7979">Connection</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.8896" x="739.7153" y="119.8125">(Client)</text></g><g class="participant participant-tail" data-participant="ClientConn"><rect fill="#FFFFFF" height="65.0439" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.3398" x="719.9902" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.9346" x="747.6929" y="4490.8979">QUIC</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.3398" x="726.9902" y="4507.9126">Connection</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="52.8896" x="739.7153" y="4524.9272">(Client)</text></g><g class="participant participant-head" data-participant="Net"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="72.543" x="1070.0425" y="98.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="58.543" x="1077.0425" y="119.8125">Network</text></g><g class="participant participant-tail" data-participant="Net"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="72.543" x="1070.0425" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="58.543" x="1077.0425" y="4490.8979">Network</text></g><g class="participant participant-head" data-participant="ServerConn"><rect fill="#FFFFFF" height="65.0439" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.3398" x="1230.5571" y="64.708"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.9346" x="1258.2598" y="85.7832">QUIC</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.3398" x="1237.5571" y="102.7979">Connection</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="59.1992" x="1247.1274" y="119.8125">(Server)</text></g><g class="participant participant-tail" data-participant="ServerConn"><rect fill="#FFFFFF" height="65.0439" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.3398" x="1230.5571" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36.9346" x="1258.2598" y="4490.8979">QUIC</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.3398" x="1237.5571" y="4507.9126">Connection</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="59.1992" x="1247.1274" y="4524.9272">(Server)</text></g><g class="participant participant-head" data-participant="ServerStreams"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.1123" x="1566.8247" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="1593.6387" y="102.7979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.1123" x="1573.8247" y="119.8125">WT Streams</text></g><g class="participant participant-tail" data-participant="ServerStreams"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="100.1123" x="1566.8247" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="1593.6387" y="4490.8979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="86.1123" x="1573.8247" y="4507.9126">WT Streams</text></g><g class="participant participant-head" data-participant="ServerWTSession"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="95.0879" x="1760.4033" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="1784.7051" y="102.7979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.0879" x="1767.4033" y="119.8125">WT Session</text></g><g class="participant participant-tail" data-participant="ServerWTSession"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="95.0879" x="1760.4033" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="1784.7051" y="4490.8979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="81.0879" x="1767.4033" y="4507.9126">WT Session</text></g><g class="participant participant-head" data-participant="ServerCtrl"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.1182" x="1930.1597" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="1948.4766" y="102.7979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.1182" x="1937.1597" y="119.8125">Controller</text></g><g class="participant participant-tail" data-participant="ServerCtrl"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="83.1182" x="1930.1597" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="1948.4766" y="4490.8979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.1182" x="1937.1597" y="4507.9126">Controller</text></g><g class="participant participant-head" data-participant="ServerList"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="69.959" x="2082.1382" y="81.7227"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="2093.8755" y="102.7979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55.959" x="2089.1382" y="119.8125">Listener</text></g><g class="participant participant-tail" data-participant="ServerList"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="69.959" x="2082.1382" y="4469.8228"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="46.4844" x="2093.8755" y="4490.8979">Server</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55.959" x="2089.1382" y="4507.9126">Listener</text></g><g><title>Client</title><rect fill="#FFFFFF" height="1842.845" style="stroke:#000000;stroke-width:1;" width="10" x="305.9468" y="443.2434"/></g><g><title>Client</title><rect fill="#FFFFFF" height="722.7788" style="stroke:#000000;stroke-width:1;" width="10" x="570.0938" y="1022.126"/></g><g><title>QUIC</title><rect fill="#FFFFFF" height="1189.8655" style="stroke:#000000;stroke-width:1;" width="10" x="761.1602" y="2626.2788"/></g><g><title>QUIC</title><rect fill="#FFFFFF" height="1102.3672" style="stroke:#000000;stroke-width:1;" width="10" x="1271.7271" y="2467.7839"/></g><g><title>Server</title><rect fill="#FFFFFF" height="558.1836" style="stroke:#000000;stroke-width:1;" width="10" x="1611.8809" y="1299.7178"/></g><g><title>Server</title><rect fill="#FFFFFF" height="1631.7515" style="stroke:#000000;stroke-width:1;" width="10" x="1802.9473" y="728.7349"/></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="161.6516" y2="161.6516"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="164.6516" y2="164.6516"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="246.5591" x="962.769" y="150.752"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="228.1157" x="968.769" y="167.8218">Application Initiated Shutdown</text><g class="message" data-participant-1="ClientApp" data-participant-2="ClientCtrl"><polygon fill="#000000" points="138.1802,213.2502,148.1802,217.2502,138.1802,221.2502,142.1802,217.2502" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="49.0562" x2="144.1802" y1="217.2502" y2="217.2502"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="77.124" x="61.0562" y="212.5208">Shutdown()</text></g><path d="M155,189.5513 L155,230.5513 L308,230.5513 L308,199.5513 L298,189.5513 L155,189.5513" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M298,189.5513 L298,199.5513 L308,199.5513 L298,189.5513" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.209" x="161" y="207.6211">Application requests</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.1104" x="161" y="223.4204">graceful shutdown</text><g class="message" data-participant-1="ClientCtrl" data-participant-2="ClientCtrl"><line style="stroke:#000000;stroke-width:1;" x1="150.1802" x2="192.1802" y1="301.8472" y2="301.8472"/><line style="stroke:#000000;stroke-width:1;" x1="192.1802" x2="192.1802" y1="301.8472" y2="314.8472"/><line style="stroke:#000000;stroke-width:1;" x1="151.1802" x2="192.1802" y1="314.8472" y2="314.8472"/><polygon fill="#000000" points="161.1802,310.8472,151.1802,314.8472,161.1802,318.8472,157.1802,314.8472" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="36.5498" x="157.1802" y="281.3184">Begin</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="193.73" y="281.3184">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.2036" x="198.3003" y="281.3184">shutdown</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="61.3311" x="178.6765" y="297.1177">sequence</text></g><path d="M273.3237,241.1499 L273.3237,345.1499 L499.3237,345.1499 L499.3237,251.1499 L489.3237,241.1499 L273.3237,241.1499" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M489.3237,241.1499 L489.3237,251.1499 L499.3237,251.1499 L489.3237,241.1499" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="123.957" x="279.3237" y="259.2197">Shutdown Steps:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147.856" x="279.3237" y="275.019">1. Signal session drain</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.8926" x="279.3237" y="290.8184">2. Close WebTransport streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.1563" x="279.3237" y="306.6177">3. Send session close</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.4927" x="279.3237" y="322.417">4. Close QUIC connection</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.9028" x="279.3237" y="338.2163">5. Cleanup resources</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="371.8455"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="371.8455" y2="371.8455"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="374.8455" y2="374.8455"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="276.2661" x="947.9155" y="360.9458"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="257.8228" x="953.9155" y="378.0156">WebTransport Session Drain Signal</text><g class="message" data-participant-1="ClientCtrl" data-participant-2="ClientWTSession"><polygon fill="#000000" points="293.9468,439.2434,303.9468,443.2434,293.9468,447.2434,297.9468,443.2434" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="150.1802" x2="299.9468" y1="443.2434" y2="443.2434"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="46.6299" x="159.6802" y="438.5139">Initiate</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="206.3101" y="438.5139">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7471" x="210.8804" y="438.5139">session</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="258.6274" y="438.5139">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="33.249" x="263.1978" y="438.5139">drain</text></g><path d="M320,399.7451 L320,472.7451 L587,472.7451 L587,409.7451 L577,399.7451 L320,399.7451" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M577,399.7451 L577,409.7451 L587,409.7451 L577,399.7451" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.3022" x="326" y="417.8149">Session Drain Process:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.4189" x="326" y="433.6143">- Stop accepting new streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="246.8223" x="326" y="449.4136">- Prepare existing streams for closure</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.8896" x="326" y="465.2129">- Signal intent to terminate</text><g class="message" data-participant-1="ClientWTSession" data-participant-2="ClientWTSession"><line style="stroke:#000000;stroke-width:1;" x1="315.9468" x2="357.9468" y1="535.74" y2="535.74"/><line style="stroke:#000000;stroke-width:1;" x1="357.9468" x2="357.9468" y1="535.74" y2="548.74"/><line style="stroke:#000000;stroke-width:1;" x1="316.9468" x2="357.9468" y1="548.74" y2="548.74"/><polygon fill="#000000" points="326.9468,544.74,316.9468,548.74,326.9468,552.74,322.9468,548.74" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.957" x="376.8892" y="499.4119">Send</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.8418" x="322.9468" y="515.2112">WT_DRAIN_SESSION</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.9912" x="368.8721" y="531.0105">capsule</text></g><path d="M484.8418,482.9424 L484.8418,555.9424 L746.8418,555.9424 L746.8418,492.9424 L736.8418,482.9424 L484.8418,482.9424" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M736.8418,482.9424 L736.8418,492.9424 L746.8418,492.9424 L736.8418,482.9424" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="162.1445" x="490.8418" y="501.0122">WT_DRAIN_SESSION:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236.3994" x="490.8418" y="516.8115">- WebTransport-specific drain signal</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="241.0586" x="490.8418" y="532.6108">- Allows graceful session termination</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.5586" x="490.8418" y="548.4102">- Peer can prepare for closure</text><g class="message" data-participant-1="ClientWTSession" data-participant-2="Net"><polygon fill="#000000" points="1094.314,605.6379,1104.314,609.6379,1094.314,613.6379,1098.314,609.6379" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="315.9468" x2="1100.314" y1="609.6379" y2="609.6379"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.8418" x="640.7095" y="589.1091">WT_DRAIN_SESSION</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="48.9912" x="686.6348" y="604.9084">capsule</text></g><path d="M1111,566.1396 L1111,623.1396 L1367,623.1396 L1367,576.1396 L1357,566.1396 L1111,566.1396" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1357,566.1396 L1357,576.1396 L1367,576.1396 L1357,566.1396" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="196.1489" x="1117" y="584.2095">Drain Signal Transmission:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="235.8408" x="1117" y="600.0088">Capsule type: WT_DRAIN_SESSION</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.3838" x="1117" y="615.8081">Indicates intent to close session</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="649.4373"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="649.4373" y2="649.4373"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="652.4373" y2="652.4373"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="228.7666" x="971.6653" y="638.5376"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="210.3232" x="977.6653" y="655.6074">Server Receives Drain Signal</text><g class="message" data-participant-1="Net" data-participant-2="ServerWTSession"><polygon fill="#000000" points="1790.9473,724.7349,1800.9473,728.7349,1790.9473,732.7349,1794.9473,728.7349" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1106.314" x2="1796.9473" y1="728.7349" y2="728.7349"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.8418" x="1384.2097" y="708.2061">WT_DRAIN_SESSION</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="54.9136" x="1427.1738" y="724.0054">received</text></g><path d="M864,677.3369 L864,750.3369 L1100,750.3369 L1100,687.3369 L1090,677.3369 L864,677.3369" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1090,677.3369 L1090,687.3369 L1100,687.3369 L1090,677.3369" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="181.0479" x="870" y="695.4067">Server Drain Processing:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.2681" x="870" y="711.2061">- Acknowledge drain signal</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.7378" x="870" y="727.0054">- Prepare for session termination</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="202.2363" x="870" y="742.8047">- Complete pending operations</text><g class="message" data-participant-1="ServerWTSession" data-participant-2="ServerWTSession"><line style="stroke:#000000;stroke-width:1;" x1="1812.9473" x2="1854.9473" y1="797.5325" y2="797.5325"/><line style="stroke:#000000;stroke-width:1;" x1="1854.9473" x2="1854.9473" y1="797.5325" y2="810.5325"/><line style="stroke:#000000;stroke-width:1;" x1="1813.9473" x2="1854.9473" y1="810.5325" y2="810.5325"/><polygon fill="#000000" points="1823.9473,806.5325,1813.9473,810.5325,1823.9473,814.5325,1819.9473,810.5325" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="49.3403" x="1819.9473" y="792.803">Process</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1869.2876" y="792.803">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="33.249" x="1873.8579" y="792.803">drain</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1907.1069" y="792.803">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.0415" x="1911.6772" y="792.803">signal</text></g><path d="M1485,760.5342 L1485,833.5342 L1797,833.5342 L1797,770.5342 L1787,760.5342 L1485,760.5342" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1787,760.5342 L1787,770.5342 L1797,770.5342 L1787,760.5342" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="119.4502" x="1491" y="778.604">Drain Response:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="291.7129" x="1491" y="794.4033">- Stop accepting new WebTransport streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="251.1768" x="1491" y="810.2026">- Complete existing stream operations</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.1367" x="1491" y="826.002">- Prepare session cleanup</text><g class="message" data-participant-1="ServerWTSession" data-participant-2="ServerStreams"><polygon fill="#000000" points="1627.8809,891.1294,1617.8809,895.1294,1627.8809,899.1294,1623.8809,895.1294" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1621.8809" x2="1801.9473" y1="895.1294" y2="895.1294"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="50.3306" x="1644.968" y="874.6006">Prepare</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1695.2986" y="874.6006">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="1699.8689" y="874.6006">streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1752.2815" y="874.6006">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18.0083" x="1756.8518" y="874.6006">for</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="46.522" x="1686.6531" y="890.3999">closure</text></g><path d="M1387,843.7314 L1387,916.7314 L1611,916.7314 L1611,853.7314 L1601,843.7314 L1387,843.7314" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1601,843.7314 L1601,853.7314 L1611,853.7314 L1601,843.7314" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="148.459" x="1393" y="861.8013">Stream Preparation:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="193.6543" x="1393" y="877.6006">- Finish sending pending data</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.6997" x="1393" y="893.3999">- Prepare FIN frames</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203.4678" x="1393" y="909.1992">- Ensure data acknowledgment</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="942.8284"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="942.8284" y2="942.8284"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="945.8284" y2="945.8284"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="304.2466" x="933.9253" y="931.9287"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="285.8032" x="939.9253" y="948.9985">WebTransport Stream Graceful Closure</text><g class="message" data-participant-1="ClientWTSession" data-participant-2="ClientStreams"><polygon fill="#000000" points="558.0938,1018.126,568.0938,1022.126,558.0938,1026.126,562.0938,1022.126" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="315.9468" x2="564.0938" y1="1022.126" y2="1022.126"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="35.0518" x="415.738" y="1001.5972">Close</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="450.7898" y="1001.5972">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="14.9424" x="455.3601" y="1001.5972">all</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="91.7236" x="368.667" y="1017.3965">WebTransport</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="460.3906" y="1017.3965">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="464.9609" y="1017.3965">streams</text></g><path d="M585,970.728 L585,1043.728 L799,1043.728 L799,980.728 L789,970.728 L585,970.728" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M789,970.728 L789,980.728 L799,980.728 L789,970.728" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="163.3506" x="591" y="988.7979">Stream Closure Order:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="193.9209" x="591" y="1004.5972">1. Unidirectional streams first</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154.9399" x="591" y="1020.3965">2. Bidirectional streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.208" x="591" y="1036.1958">3. Await acknowledgments</text><g class="message" data-participant-1="ClientStreams" data-participant-2="ClientStreams"><line style="stroke:#000000;stroke-width:1;" x1="580.0938" x2="622.0938" y1="1098.8232" y2="1098.8232"/><line style="stroke:#000000;stroke-width:1;" x1="622.0938" x2="622.0938" y1="1098.8232" y2="1111.8232"/><line style="stroke:#000000;stroke-width:1;" x1="581.0938" x2="622.0938" y1="1111.8232" y2="1111.8232"/><polygon fill="#000000" points="591.0938,1107.8232,581.0938,1111.8232,591.0938,1115.8232,587.0938,1111.8232" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.957" x="587.0938" y="1078.2944">Send</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="620.0508" y="1078.2944">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="22.6675" x="624.6211" y="1078.2944">FIN</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="647.2886" y="1078.2944">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.1167" x="651.8589" y="1078.2944">on</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="667.9756" y="1078.2944">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="14.9424" x="672.5459" y="1078.2944">all</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="611.0847" y="1094.0938">streams</text></g><path d="M709.3945,1053.9253 L709.3945,1126.9253 L949.3945,1126.9253 L949.3945,1063.9253 L939.3945,1053.9253 L709.3945,1053.9253" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M939.3945,1053.9253 L939.3945,1063.9253 L949.3945,1063.9253 L939.3945,1053.9253" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="149.9888" x="715.3945" y="1071.9951">Stream FIN Process:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.0132" x="715.3945" y="1087.7944">- Send remaining buffered data</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="219.5718" x="715.3945" y="1103.5938">- Send FIN frame on each stream</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="184.4185" x="715.3945" y="1119.3931">- Mark send direction closed</text><g class="message" data-participant-1="ClientStreams" data-participant-2="Net"><polygon fill="#000000" points="1094.314,1168.7212,1104.314,1172.7212,1094.314,1176.7212,1098.314,1172.7212" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="580.0938" x2="1100.314" y1="1172.7212" y2="1172.7212"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7534" x="780.8794" y="1167.9917">Stream</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="828.6328" y="1167.9917">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="22.6675" x="833.2031" y="1167.9917">FIN</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="855.8706" y="1167.9917">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="45.0874" x="860.4409" y="1167.9917">frames</text></g><path d="M1111,1137.1226 L1111,1194.1226 L1328,1194.1226 L1328,1147.1226 L1318,1137.1226 L1111,1137.1226" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1318,1137.1226 L1318,1147.1226 L1328,1147.1226 L1318,1137.1226" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="196.4663" x="1117" y="1155.1924">Multiple FIN Transmission:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.6948" x="1117" y="1170.9917">FIN frames for all active</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.7065" x="1117" y="1186.791">WebTransport streams</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="1220.4202"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="1220.4202" y2="1220.4202"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="1223.4202" y2="1223.4202"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="266.5986" x="952.7493" y="1209.5205"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="248.1553" x="958.7493" y="1226.5903">Server Stream Closure Processing</text><g class="message" data-participant-1="Net" data-participant-2="ServerStreams"><polygon fill="#000000" points="1599.8809,1295.7178,1609.8809,1299.7178,1599.8809,1303.7178,1603.8809,1299.7178" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1106.314" x2="1605.8809" y1="1299.7178" y2="1299.7178"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="50.8511" x="1333.6719" y="1263.3896">Multiple</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="165.7056" x="1276.2446" y="1279.189">PEER_SEND_SHUTDOWN</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="43.3037" x="1337.4456" y="1294.9883">events</text></g><path d="M892,1248.3198 L892,1305.3198 L1101,1305.3198 L1101,1258.3198 L1091,1248.3198 L892,1248.3198" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1091,1248.3198 L1091,1258.3198 L1101,1258.3198 L1091,1248.3198" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="163.541" x="898" y="1266.3896">Server Stream Events:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188.2842" x="898" y="1282.189">PEER_SEND_SHUTDOWN for</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.0552" x="898" y="1297.9883">each WebTransport stream</text><g class="message" data-participant-1="ServerStreams" data-participant-2="ServerStreams"><line style="stroke:#000000;stroke-width:1;" x1="1621.8809" x2="1663.8809" y1="1360.6157" y2="1360.6157"/><line style="stroke:#000000;stroke-width:1;" x1="1663.8809" x2="1663.8809" y1="1360.6157" y2="1373.6157"/><line style="stroke:#000000;stroke-width:1;" x1="1622.8809" x2="1663.8809" y1="1373.6157" y2="1373.6157"/><polygon fill="#000000" points="1632.8809,1369.6157,1622.8809,1373.6157,1632.8809,1377.6157,1628.8809,1373.6157" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="49.3403" x="1628.8809" y="1340.0869">Process</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1678.2212" y="1340.0869">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="14.9424" x="1682.7915" y="1340.0869">all</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1697.7339" y="1340.0869">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="45.6396" x="1702.3042" y="1340.0869">stream</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="29.4404" x="1673.6921" y="1355.8862">FINs</text></g><path d="M1392,1315.7178 L1392,1388.7178 L1606,1388.7178 L1606,1325.7178 L1596,1315.7178 L1392,1315.7178" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1596,1315.7178 L1596,1325.7178 L1606,1325.7178 L1596,1315.7178" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="115.6479" x="1398" y="1333.7876">FIN Processing:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="189.3315" x="1398" y="1349.5869">- Acknowledge received FINs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.8101" x="1398" y="1365.3862">- Send response FINs</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="193.2607" x="1398" y="1381.1855">- Complete data transmission</text><g class="message" data-participant-1="ServerStreams" data-participant-2="ServerStreams"><line style="stroke:#000000;stroke-width:1;" x1="1621.8809" x2="1663.8809" y1="1428.0137" y2="1428.0137"/><line style="stroke:#000000;stroke-width:1;" x1="1663.8809" x2="1663.8809" y1="1428.0137" y2="1441.0137"/><line style="stroke:#000000;stroke-width:1;" x1="1622.8809" x2="1663.8809" y1="1441.0137" y2="1441.0137"/><polygon fill="#000000" points="1632.8809,1437.0137,1622.8809,1441.0137,1632.8809,1445.0137,1628.8809,1441.0137" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.957" x="1628.8809" y="1423.2842">Send</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1661.8379" y="1423.2842">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.7983" x="1666.4082" y="1423.2842">response</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1725.2065" y="1423.2842">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="29.4404" x="1729.7769" y="1423.2842">FINs</text></g><path d="M1386,1398.915 L1386,1455.915 L1606,1455.915 L1606,1408.915 L1596,1398.915 L1386,1398.915" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1596,1398.915 L1596,1408.915 L1606,1408.915 L1596,1398.915" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128.5337" x="1392" y="1416.9849">Bidirectional FIN:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.3086" x="1392" y="1432.7842">Server sends FIN on its</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="199.8623" x="1392" y="1448.5835">send direction for each stream</text><g class="message" data-participant-1="ServerStreams" data-participant-2="Net"><polygon fill="#000000" points="1117.314,1497.9116,1107.314,1501.9116,1117.314,1505.9116,1113.314,1501.9116" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1111.314" x2="1610.8809" y1="1501.9116" y2="1501.9116"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.2896" x="1289.5049" y="1497.1821">Response</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1351.7944" y="1497.1821">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="22.6675" x="1356.3647" y="1497.1821">FIN</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1379.0322" y="1497.1821">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="45.0874" x="1383.6025" y="1497.1821">frames</text></g><path d="M912,1466.313 L912,1523.313 L1101,1523.313 L1101,1476.313 L1091,1466.313 L912,1466.313" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1091,1466.313 L1091,1476.313 L1101,1476.313 L1091,1466.313" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="158.6851" x="918" y="1484.3828">Server FIN Response:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="160.0942" x="918" y="1500.1821">FIN acknowledgment for</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.2192" x="918" y="1515.9814">all WebTransport streams</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="1549.6106"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="1549.6106" y2="1549.6106"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="1552.6106" y2="1552.6106"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="304.6909" x="933.7031" y="1538.7109"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="286.2476" x="939.7031" y="1555.7808">Stream Acknowledgment &amp; Completion</text><g class="message" data-participant-1="Net" data-participant-2="ClientStreams"><polygon fill="#000000" points="591.0938,1617.0085,581.0938,1621.0085,591.0938,1625.0085,587.0938,1621.0085" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="585.0938" x2="1105.314" y1="1621.0085" y2="1621.0085"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="43.1641" x="808.0029" y="1600.4797">Server</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="851.167" y="1600.4797">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="22.6675" x="855.7373" y="1600.4797">FIN</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.0508" x="784.6785" y="1616.2791">acknowledgments</text></g><path d="M1111,1577.5103 L1111,1634.5103 L1348,1634.5103 L1348,1587.5103 L1338,1577.5103 L1111,1577.5103" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1338,1577.5103 L1338,1587.5103 L1348,1587.5103 L1338,1577.5103" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="216.6328" x="1117" y="1595.5801">Stream Closure Confirmation:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169.2983" x="1117" y="1611.3794">All WebTransport streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.4541" x="1117" y="1627.1787">fully closed bidirectionally</text><g class="message" data-participant-1="ClientStreams" data-participant-2="ClientStreams"><line style="stroke:#000000;stroke-width:1;" x1="580.0938" x2="622.0938" y1="1689.8062" y2="1689.8062"/><line style="stroke:#000000;stroke-width:1;" x1="622.0938" x2="622.0938" y1="1689.8062" y2="1702.8062"/><line style="stroke:#000000;stroke-width:1;" x1="581.0938" x2="622.0938" y1="1702.8062" y2="1702.8062"/><polygon fill="#000000" points="591.0938,1698.8062,581.0938,1702.8062,591.0938,1706.8062,587.0938,1702.8062" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.0215" x="629.1248" y="1669.2773">All</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="645.1462" y="1669.2773">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="649.7166" y="1669.2773">streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.0664" x="587.0938" y="1685.0767">SHUTDOWN_COMPLETE</text></g><path d="M766.0664,1644.9082 L766.0664,1717.9082 L948.0664,1717.9082 L948.0664,1654.9082 L938.0664,1644.9082 L766.0664,1644.9082" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M938.0664,1644.9082 L938.0664,1654.9082 L948.0664,1654.9082 L938.0664,1644.9082" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="121.145" x="772.0664" y="1662.978">Stream Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.0908" x="772.0664" y="1678.7773">- All streams fully closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.7778" x="772.0664" y="1694.5767">- Resources deallocated</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="95.0942" x="772.0664" y="1710.376">- Buffers freed</text><g class="message" data-participant-1="ClientStreams" data-participant-2="ClientWTSession"><polygon fill="#000000" points="326.9468,1740.9048,316.9468,1744.9048,326.9468,1748.9048,322.9468,1744.9048" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="320.9468" x2="574.0938" y1="1744.9048" y2="1744.9048"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.0215" x="386.3093" y="1740.1753">All</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="402.3308" y="1740.1753">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="406.9011" y="1740.1753">streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="459.3137" y="1740.1753">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.8472" x="463.884" y="1740.1753">closed</text></g><g class="message" data-participant-1="ServerStreams" data-participant-2="ServerStreams"><line style="stroke:#000000;stroke-width:1;" x1="1621.8809" x2="1663.8809" y1="1802.8027" y2="1802.8027"/><line style="stroke:#000000;stroke-width:1;" x1="1663.8809" x2="1663.8809" y1="1802.8027" y2="1815.8027"/><line style="stroke:#000000;stroke-width:1;" x1="1622.8809" x2="1663.8809" y1="1815.8027" y2="1815.8027"/><polygon fill="#000000" points="1632.8809,1811.8027,1622.8809,1815.8027,1632.8809,1819.8027,1628.8809,1815.8027" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.0215" x="1670.9119" y="1782.2739">All</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1686.9333" y="1782.2739">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="1691.5037" y="1782.2739">streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.0664" x="1628.8809" y="1798.0732">SHUTDOWN_COMPLETE</text></g><path d="M1360,1757.9048 L1360,1830.9048 L1606,1830.9048 L1606,1767.9048 L1596,1757.9048 L1360,1757.9048" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1596,1757.9048 L1596,1767.9048 L1606,1767.9048 L1596,1757.9048" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="173.4624" x="1366" y="1775.9746">Server Stream Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="225.1895" x="1366" y="1791.7739">- All WebTransport streams closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.2607" x="1366" y="1807.5732">- Resources freed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.4136" x="1366" y="1823.3726">- Session ready for termination</text><g class="message" data-participant-1="ServerStreams" data-participant-2="ServerWTSession"><polygon fill="#000000" points="1790.9473,1853.9014,1800.9473,1857.9014,1790.9473,1861.9014,1794.9473,1857.9014" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1616.8809" x2="1796.9473" y1="1857.9014" y2="1857.9014"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.0215" x="1650.7031" y="1853.1719">All</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1666.7246" y="1853.1719">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.4126" x="1671.2949" y="1853.1719">streams</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1723.7075" y="1853.1719">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.8472" x="1728.2778" y="1853.1719">closed</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="1886.801"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="1886.801" y2="1886.801"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="1889.801" y2="1889.801"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="275.6758" x="948.2107" y="1875.9014"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="257.2324" x="954.2107" y="1892.9712">WebTransport Session Termination</text><g class="message" data-participant-1="ClientWTSession" data-participant-2="ClientWTSession"><line style="stroke:#000000;stroke-width:1;" x1="315.9468" x2="357.9468" y1="1959.5986" y2="1959.5986"/><line style="stroke:#000000;stroke-width:1;" x1="357.9468" x2="357.9468" y1="1959.5986" y2="1972.5986"/><line style="stroke:#000000;stroke-width:1;" x1="316.9468" x2="357.9468" y1="1972.5986" y2="1972.5986"/><polygon fill="#000000" points="326.9468,1968.5986,316.9468,1972.5986,326.9468,1976.5986,322.9468,1972.5986" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.957" x="421.5417" y="1939.0698">Send</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="230.147" x="322.9468" y="1954.8691">CLOSE_WEBTRANSPORT_SESSION</text></g><path d="M574.147,1914.7007 L574.147,1987.7007 L835.147,1987.7007 L835.147,1924.7007 L825.147,1914.7007 L574.147,1914.7007" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M825.147,1914.7007 L825.147,1924.7007 L835.147,1924.7007 L825.147,1914.7007" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="155.1494" x="580.147" y="1932.7705">Session Close Frame:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="240.8174" x="580.147" y="1948.5698">- Final WebTransport session closure</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.8252" x="580.147" y="1964.3691">- Include session error code</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="238.4307" x="580.147" y="1980.1685">- Prepare for connection termination</text><g class="message" data-participant-1="ClientWTSession" data-participant-2="Net"><polygon fill="#000000" points="1094.314,2037.3962,1104.314,2041.3962,1094.314,2045.3962,1098.314,2041.3962" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="315.9468" x2="1100.314" y1="2041.3962" y2="2041.3962"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="230.147" x="596.0569" y="2020.8674">CLOSE_WEBTRANSPORT_SESSION</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.3145" x="691.9731" y="2036.6667">frame</text></g><path d="M1111,1997.8979 L1111,2054.8979 L1276,2054.8979 L1276,2007.8979 L1266,1997.8979 L1111,1997.8979" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1266,1997.8979 L1266,2007.8979 L1276,2007.8979 L1266,1997.8979" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120.4404" x="1117" y="2015.9678">Session Closure:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.041" x="1117" y="2031.7671">WebTransport session</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.7715" x="1117" y="2047.5664">officially terminated</text><g class="message" data-participant-1="Net" data-participant-2="ServerWTSession"><polygon fill="#000000" points="1790.9473,2112.6938,1800.9473,2116.6938,1790.9473,2120.6938,1794.9473,2116.6938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1106.314" x2="1796.9473" y1="2116.6938" y2="2116.6938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="230.147" x="1339.5571" y="2096.165">CLOSE_WEBTRANSPORT_SESSION</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="54.9136" x="1427.1738" y="2111.9644">received</text></g><path d="M870,2065.2959 L870,2138.2959 L1100,2138.2959 L1100,2075.2959 L1090,2065.2959 L870,2065.2959" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1090,2065.2959 L1090,2075.2959 L1100,2075.2959 L1090,2065.2959" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="206.5654" x="876" y="2083.3657">Server Session Termination:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192.334" x="876" y="2099.165">- Process session close frame</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.2505" x="876" y="2114.9644">- Clean up session state</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.4854" x="876" y="2130.7637">- Prepare connection for closure</text><g class="message" data-participant-1="ServerWTSession" data-participant-2="ServerWTSession"><line style="stroke:#000000;stroke-width:1;" x1="1812.9473" x2="1854.9473" y1="2193.3911" y2="2193.3911"/><line style="stroke:#000000;stroke-width:1;" x1="1854.9473" x2="1854.9473" y1="2193.3911" y2="2206.3911"/><line style="stroke:#000000;stroke-width:1;" x1="1813.9473" x2="1854.9473" y1="2206.3911" y2="2206.3911"/><polygon fill="#000000" points="1823.9473,2202.3911,1813.9473,2206.3911,1823.9473,2210.3911,1819.9473,2206.3911" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="36.4229" x="1819.9473" y="2172.8623">Clean</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1856.3701" y="2172.8623">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.3262" x="1860.9404" y="2172.8623">up</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1877.2666" y="2172.8623">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7471" x="1881.8369" y="2172.8623">session</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="1843.2559" y="2188.6616">resources</text></g><path d="M1591,2148.4932 L1591,2221.4932 L1797,2221.4932 L1797,2158.4932 L1787,2148.4932 L1591,2148.4932" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1787,2148.4932 L1787,2158.4932 L1797,2158.4932 L1787,2148.4932" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="124.376" x="1597" y="2166.563">Session Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.9717" x="1597" y="2182.3623">- Deallocate session state</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="185.8911" x="1597" y="2198.1616">- Clean up stream mappings</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.8882" x="1597" y="2213.9609">- Free session resources</text><g class="message" data-participant-1="ClientWTSession" data-participant-2="ClientWTSession"><line style="stroke:#000000;stroke-width:1;" x1="315.9468" x2="357.9468" y1="2285.0884" y2="2285.0884"/><line style="stroke:#000000;stroke-width:1;" x1="357.9468" x2="357.9468" y1="2285.0884" y2="2298.0884"/><line style="stroke:#000000;stroke-width:1;" x1="310.9468" x2="357.9468" y1="2298.0884" y2="2298.0884"/><polygon fill="#000000" points="320.9468,2294.0884,310.9468,2298.0884,320.9468,2302.0884,316.9468,2298.0884" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="49.8608" x="329.7134" y="2248.7603">Session</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="379.5742" y="2248.7603">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.4731" x="384.1445" y="2248.7603">state:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.3037" x="322.9468" y="2264.5596">CONNECTED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="405.2505" y="2264.5596">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5635" x="409.8208" y="2264.5596">&#226;&#8224;&#8217;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53.6694" x="349.3308" y="2280.3589">CLOSED</text></g><g class="message" data-participant-1="ServerWTSession" data-participant-2="ServerWTSession"><line style="stroke:#000000;stroke-width:1;" x1="1812.9473" x2="1854.9473" y1="2359.4863" y2="2359.4863"/><line style="stroke:#000000;stroke-width:1;" x1="1854.9473" x2="1854.9473" y1="2359.4863" y2="2372.4863"/><line style="stroke:#000000;stroke-width:1;" x1="1807.9473" x2="1854.9473" y1="2372.4863" y2="2372.4863"/><polygon fill="#000000" points="1817.9473,2368.4863,1807.9473,2372.4863,1817.9473,2376.4863,1813.9473,2372.4863" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="49.8608" x="1826.7139" y="2323.1582">Session</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1876.5747" y="2323.1582">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.4731" x="1881.145" y="2323.1582">state:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.3037" x="1819.9473" y="2338.9575">CONNECTED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1902.251" y="2338.9575">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5635" x="1906.8213" y="2338.9575">&#226;&#8224;&#8217;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53.6694" x="1846.3313" y="2354.7568">CLOSED</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="2396.386"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="2396.386" y2="2396.386"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="2399.386" y2="2399.386"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="300.2476" x="935.9248" y="2385.4863"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="281.8042" x="941.9248" y="2402.5562">HTTP/3 GOAWAY Exchange (Optional)</text><g class="message" data-participant-1="ServerCtrl" data-participant-2="ServerConn"><polygon fill="#000000" points="1292.7271,2463.7839,1282.7271,2467.7839,1292.7271,2471.7839,1288.7271,2467.7839" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1286.7271" x2="1970.7188" y1="2467.7839" y2="2467.7839"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.957" x="1552.3062" y="2463.0544">Send</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1585.2632" y="2463.0544">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7979" x="1589.8335" y="2463.0544">HTTP/3</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1637.6313" y="2463.0544">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.938" x="1642.2017" y="2463.0544">GOAWAY</text></g><path d="M996,2424.2856 L996,2497.2856 L1266,2497.2856 L1266,2434.2856 L1256,2424.2856 L996,2424.2856" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1256,2424.2856 L1256,2434.2856 L1266,2434.2856 L1256,2424.2856" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="121.6909" x="1002" y="2442.3555">GOAWAY Frame:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="225.564" x="1002" y="2458.1548">- HTTP/3 graceful shutdown signal</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="245.2607" x="1002" y="2473.9541">- Indicates no new requests accepted</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="249.501" x="1002" y="2489.7534">- Allows existing requests to complete</text><g class="message" data-participant-1="ServerConn" data-participant-2="Net"><polygon fill="#000000" points="1117.314,2546.9812,1107.314,2550.9812,1117.314,2554.9812,1113.314,2550.9812" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1111.314" x2="1270.7271" y1="2550.9812" y2="2550.9812"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7979" x="1133.3674" y="2530.4524">HTTP/3</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1181.1653" y="2530.4524">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.938" x="1185.7356" y="2530.4524">GOAWAY</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.3145" x="1169.8633" y="2546.2517">frame</text></g><path d="M876,2507.4829 L876,2564.4829 L1101,2564.4829 L1101,2517.4829 L1091,2507.4829 L876,2507.4829" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1091,2507.4829 L1091,2517.4829 L1101,2517.4829 L1091,2507.4829" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="180.6035" x="882" y="2525.5527">Connection Drain Signal:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173.5576" x="882" y="2541.3521">HTTP/3 GOAWAY indicates</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.2485" x="882" y="2557.1514">connection entering drain state</text><g class="message" data-participant-1="Net" data-participant-2="ClientConn"><polygon fill="#000000" points="782.1602,2622.2788,772.1602,2626.2788,782.1602,2630.2788,778.1602,2626.2788" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="776.1602" x2="1105.314" y1="2626.2788" y2="2626.2788"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7979" x="883.084" y="2605.75">HTTP/3</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="930.8818" y="2605.75">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="58.938" x="935.4521" y="2605.75">GOAWAY</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="54.9136" x="911.2803" y="2621.5493">received</text></g><path d="M1111,2574.8809 L1111,2647.8809 L1341,2647.8809 L1341,2584.8809 L1331,2574.8809 L1111,2574.8809" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1331,2574.8809 L1331,2584.8809 L1341,2584.8809 L1331,2574.8809" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="201.6714" x="1117" y="2592.9507">Client GOAWAY Processing:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173.7544" x="1117" y="2608.75">- No new requests allowed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.3301" x="1117" y="2624.5493">- Existing operations continue</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="209.4854" x="1117" y="2640.3486">- Prepare for connection closure</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="2673.9778"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="2673.9778" y2="2673.9778"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="2676.9778" y2="2676.9778"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="221.3398" x="975.3787" y="2663.0781"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="202.8965" x="981.3787" y="2680.1479">Data Acknowledgment Wait</text><g class="message" data-participant-1="ClientCtrl" data-participant-2="ClientCtrl"><line style="stroke:#000000;stroke-width:1;" x1="150.1802" x2="192.1802" y1="2746.7754" y2="2746.7754"/><line style="stroke:#000000;stroke-width:1;" x1="192.1802" x2="192.1802" y1="2746.7754" y2="2759.7754"/><line style="stroke:#000000;stroke-width:1;" x1="151.1802" x2="192.1802" y1="2759.7754" y2="2759.7754"/><polygon fill="#000000" points="161.1802,2755.7754,151.1802,2759.7754,161.1802,2763.7754,157.1802,2759.7754" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="29.3516" x="169.6501" y="2726.2466">Wait</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="199.0017" y="2726.2466">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="18.0083" x="203.572" y="2726.2466">for</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="221.5803" y="2726.2466">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="28.8374" x="226.1506" y="2726.2466">data</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.2778" x="157.1802" y="2742.0459">acknowledgment</text></g><path d="M279.2778,2701.8774 L279.2778,2774.8774 L520.2778,2774.8774 L520.2778,2711.8774 L510.2778,2701.8774 L279.2778,2701.8774" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M510.2778,2701.8774 L510.2778,2711.8774 L520.2778,2711.8774 L510.2778,2701.8774" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="146.3706" x="285.2778" y="2719.9473">Critical Wait Period:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.0864" x="285.2778" y="2735.7466">- Ensure all data acknowledged</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.4697" x="285.2778" y="2751.5459">- Wait for QUIC ACK frames</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="220.8032" x="285.2778" y="2767.3452">- Prevent data loss during closure</text><g class="message" data-participant-1="ClientCtrl" data-participant-2="ClientCtrl"><line style="stroke:#000000;stroke-width:1;" x1="150.1802" x2="192.1802" y1="2829.9727" y2="2829.9727"/><line style="stroke:#000000;stroke-width:1;" x1="192.1802" x2="192.1802" y1="2829.9727" y2="2842.9727"/><line style="stroke:#000000;stroke-width:1;" x1="151.1802" x2="192.1802" y1="2842.9727" y2="2842.9727"/><polygon fill="#000000" points="161.1802,2838.9727,151.1802,2842.9727,161.1802,2846.9727,157.1802,2842.9727" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="49.2007" x="157.1802" y="2809.4438">Monitor</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="206.3809" y="2809.4438">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="34.2964" x="210.9512" y="2809.4438">QUIC</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="245.2476" y="2809.4438">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="26.9712" x="249.8179" y="2809.4438">ACK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="39.8252" x="197.072" y="2825.2432">status</text></g><path d="M288.6089,2785.0747 L288.6089,2858.0747 L557.6089,2858.0747 L557.6089,2795.0747 L547.6089,2785.0747 L288.6089,2785.0747" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M547.6089,2785.0747 L547.6089,2795.0747 L557.6089,2795.0747 L547.6089,2785.0747" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="118.2505" x="294.6089" y="2803.1445">ACK Monitoring:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="248.4536" x="294.6089" y="2818.9438">- Check stream data acknowledgment</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.3184" x="294.6089" y="2834.7432">- Verify connection flow control</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="183.5679" x="294.6089" y="2850.5425">- Ensure safe closure timing</text><path d="M712,2868.272 L712,2925.272 L1329,2925.272 L1329,2878.272 L1319,2868.272 L712,2868.272" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1319,2868.272 L1319,2878.272 L1329,2878.272 L1319,2868.272" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="215.8965" x="878.3601" y="2886.3418">Acknowledgment Wait Period</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="266.3857" x="878.3601" y="2902.1411">Both sides ensure all data acknowledged</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="276.1865" x="878.3601" y="2917.9404">before proceeding with connection closure</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="2951.5696"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="2951.5696" y2="2951.5696"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="2954.5696" y2="2954.5696"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="286.4287" x="942.8342" y="2940.6699"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="267.9854" x="948.8342" y="2957.7397">QUIC Connection Graceful Shutdown</text><g class="message" data-participant-1="ClientConn" data-participant-2="ClientConn"><line style="stroke:#000000;stroke-width:1;" x1="771.1602" x2="813.1602" y1="3016.4675" y2="3016.4675"/><line style="stroke:#000000;stroke-width:1;" x1="813.1602" x2="813.1602" y1="3016.4675" y2="3029.4675"/><line style="stroke:#000000;stroke-width:1;" x1="772.1602" x2="813.1602" y1="3029.4675" y2="3029.4675"/><polygon fill="#000000" points="782.1602,3025.4675,772.1602,3029.4675,782.1602,3033.4675,778.1602,3029.4675" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16.0215" x="778.1602" y="3011.738">All</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="794.1816" y="3011.738">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="28.8374" x="798.752" y="3011.738">data</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="827.5894" y="3011.738">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.3838" x="832.1597" y="3011.738">acknowledged</text></g><path d="M946.3833,2979.4692 L946.3833,3052.4692 L1195.3833,3052.4692 L1195.3833,2989.4692 L1185.3833,2979.4692 L946.3833,2979.4692" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1185.3833,2979.4692 L1185.3833,2989.4692 L1195.3833,2989.4692 L1185.3833,2979.4692" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170.6821" x="952.3833" y="2997.5391">Safe Closure Condition:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.8955" x="952.3833" y="3013.3384">- All streams closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.8569" x="952.3833" y="3029.1377">- All data acknowledged</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228.4839" x="952.3833" y="3044.937">- Ready for connection termination</text><g class="message" data-participant-1="ClientConn" data-participant-2="ClientConn"><line style="stroke:#000000;stroke-width:1;" x1="771.1602" x2="813.1602" y1="3099.6648" y2="3099.6648"/><line style="stroke:#000000;stroke-width:1;" x1="813.1602" x2="813.1602" y1="3099.6648" y2="3112.6648"/><line style="stroke:#000000;stroke-width:1;" x1="772.1602" x2="813.1602" y1="3112.6648" y2="3112.6648"/><polygon fill="#000000" points="782.1602,3108.6648,772.1602,3112.6648,782.1602,3116.6648,778.1602,3112.6648" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.5869" x="778.1602" y="3079.136">State:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="818.7471" y="3079.136">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.3037" x="823.3174" y="3079.136">CONNECTED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5635" x="795.6162" y="3094.9353">&#226;&#8224;&#8217;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="815.1797" y="3094.9353">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.415" x="819.75" y="3094.9353">DRAINING</text></g><path d="M927.4609,3062.6665 L927.4609,3119.6665 L1156.4609,3119.6665 L1156.4609,3072.6665 L1146.4609,3062.6665 L927.4609,3062.6665" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1146.4609,3062.6665 L1146.4609,3072.6665 L1156.4609,3072.6665 L1146.4609,3062.6665" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="208.1777" x="933.4609" y="3080.7363">Connection State Transition:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.1758" x="933.4609" y="3096.5356">Transition to draining state</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.311" x="933.4609" y="3112.335">Prepare for final closure</text><g class="message" data-participant-1="ClientConn" data-participant-2="Net"><polygon fill="#000000" points="1094.314,3177.4624,1104.314,3181.4624,1094.314,3185.4624,1098.314,3181.4624" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="771.1602" x2="1100.314" y1="3181.4624" y2="3181.4624"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.4131" x="868.0305" y="3160.9336">CONNECTION_CLOSE</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="38.3145" x="919.5798" y="3176.7329">frame</text></g><path d="M1111,3130.0645 L1111,3203.0645 L1358,3203.0645 L1358,3140.0645 L1348,3130.0645 L1111,3130.0645" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1348,3130.0645 L1348,3140.0645 L1358,3140.0645 L1348,3130.0645" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="202.6616" x="1117" y="3148.1343">QUIC CONNECTION_CLOSE:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="226.332" x="1117" y="3163.9336">Frame type: CONNECTION_CLOSE</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.7378" x="1117" y="3179.7329">Error code: NO_ERROR (0)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="191.9785" x="1117" y="3195.5322">Reason: "Graceful shutdown"</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="3229.1614"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="3229.1614" y2="3229.1614"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="3232.1614" y2="3232.1614"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="230.582" x="970.7576" y="3218.2617"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="212.1387" x="976.7576" y="3235.3315">Server Connection Shutdown</text><g class="message" data-participant-1="Net" data-participant-2="ServerConn"><polygon fill="#000000" points="1259.7271,3296.5593,1269.7271,3300.5593,1259.7271,3304.5593,1263.7271,3300.5593" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1106.314" x2="1265.7271" y1="3300.5593" y2="3300.5593"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.4131" x="1118.314" y="3280.0305">CONNECTION_CLOSE</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="54.9136" x="1161.5637" y="3295.8298">received</text></g><path d="M865,3257.061 L865,3314.061 L1100,3314.061 L1100,3267.061 L1090,3257.061 L865,3257.061" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1090,3257.061 L1090,3267.061 L1100,3267.061 L1090,3257.061" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="214.3413" x="871" y="3275.1309">Connection Close Processing:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.9189" x="871" y="3290.9302">Graceful shutdown request</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.708" x="871" y="3306.7295">from client received</text><g class="message" data-participant-1="ServerConn" data-participant-2="ServerConn"><line style="stroke:#000000;stroke-width:1;" x1="1281.7271" x2="1323.7271" y1="3361.4573" y2="3361.4573"/><line style="stroke:#000000;stroke-width:1;" x1="1323.7271" x2="1323.7271" y1="3361.4573" y2="3374.4573"/><line style="stroke:#000000;stroke-width:1;" x1="1282.7271" x2="1323.7271" y1="3374.4573" y2="3374.4573"/><polygon fill="#000000" points="1292.7271,3370.4573,1282.7271,3374.4573,1292.7271,3378.4573,1288.7271,3374.4573" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.5869" x="1288.7271" y="3340.9285">State:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1329.314" y="3340.9285">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.3037" x="1333.8843" y="3340.9285">CONNECTED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5635" x="1306.1831" y="3356.7278">&#226;&#8224;&#8217;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1325.7466" y="3356.7278">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.415" x="1330.3169" y="3356.7278">DRAINING</text></g><path d="M1071,3324.459 L1071,3381.459 L1266,3381.459 L1266,3334.459 L1256,3324.459 L1071,3324.459" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1256,3324.459 L1256,3334.459 L1266,3334.459 L1256,3324.459" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="174.3638" x="1077" y="3342.5288">Server State Transition:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.9424" x="1077" y="3358.3281">Process shutdown request</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.7144" x="1077" y="3374.1274">Enter draining state</text><g class="message" data-participant-1="ServerConn" data-participant-2="ServerConn"><line style="stroke:#000000;stroke-width:1;" x1="1281.7271" x2="1323.7271" y1="3420.9556" y2="3420.9556"/><line style="stroke:#000000;stroke-width:1;" x1="1323.7271" x2="1323.7271" y1="3420.9556" y2="3433.9556"/><line style="stroke:#000000;stroke-width:1;" x1="1282.7271" x2="1323.7271" y1="3433.9556" y2="3433.9556"/><polygon fill="#000000" points="1292.7271,3429.9556,1282.7271,3433.9556,1292.7271,3437.9556,1288.7271,3433.9556" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="306.1538" x="1288.7271" y="3416.2261">CONNECTION_EVENT_SHUTDOWN_COMPLETE</text></g><path d="M1037,3391.8569 L1037,3448.8569 L1266,3448.8569 L1266,3401.8569 L1256,3391.8569 L1037,3391.8569" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1256,3391.8569 L1256,3401.8569 L1266,3401.8569 L1256,3391.8569" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="208.3682" x="1043" y="3409.9268">Shutdown Event Processing:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.8994" x="1043" y="3425.7261">Cleanup connection state</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.2451" x="1043" y="3441.5254">Prepare final resources cleanup</text><g class="message" data-participant-1="ServerConn" data-participant-2="ServerConn"><line style="stroke:#000000;stroke-width:1;" x1="1281.7271" x2="1323.7271" y1="3496.2532" y2="3496.2532"/><line style="stroke:#000000;stroke-width:1;" x1="1323.7271" x2="1323.7271" y1="3496.2532" y2="3509.2532"/><line style="stroke:#000000;stroke-width:1;" x1="1282.7271" x2="1323.7271" y1="3509.2532" y2="3509.2532"/><polygon fill="#000000" points="1292.7271,3505.2532,1282.7271,3509.2532,1292.7271,3513.2532,1288.7271,3509.2532" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.5869" x="1288.7271" y="3475.7244">State:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1329.314" y="3475.7244">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.415" x="1333.8843" y="3475.7244">DRAINING</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1402.2993" y="3475.7244">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5635" x="1406.8696" y="3475.7244">&#226;&#8224;&#8217;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53.6694" x="1330.7454" y="3491.5237">CLOSED</text></g><path d="M1095,3459.2549 L1095,3516.2549 L1266,3516.2549 L1266,3469.2549 L1256,3459.2549 L1095,3459.2549" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1256,3459.2549 L1256,3469.2549 L1266,3469.2549 L1256,3459.2549" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="83.3574" x="1101" y="3477.3247">Final State:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.3569" x="1101" y="3493.124">Connection fully closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.8877" x="1101" y="3508.9233">All resources freed</text><g class="message" data-participant-1="ServerConn" data-participant-2="ServerCtrl"><polygon fill="#000000" points="1959.7188,3566.1511,1969.7188,3570.1511,1959.7188,3574.1511,1963.7188,3570.1511" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1276.7271" x2="1965.7188" y1="3570.1511" y2="3570.1511"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.7441" x="1565.1421" y="3549.6223">Connection</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="1637.8862" y="3549.6223">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.8472" x="1642.4565" y="3549.6223">closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.3315" x="1588.0571" y="3565.4216">notification</text></g><path d="M1032,3526.6528 L1032,3583.6528 L1266,3583.6528 L1266,3536.6528 L1256,3526.6528 L1032,3526.6528" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1256,3526.6528 L1256,3536.6528 L1266,3536.6528 L1256,3526.6528" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="153.5688" x="1038" y="3544.7227">Cleanup Notification:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213.04" x="1038" y="3560.522">Remove from active connections</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.1494" x="1038" y="3576.3213">Update server state</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="3609.9504"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="3609.9504" y2="3609.9504"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="3612.9504" y2="3612.9504"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="209.9077" x="981.0947" y="3599.0508"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="191.4644" x="987.0947" y="3616.1206">Client Connection Cleanup</text><g class="message" data-participant-1="ClientConn" data-participant-2="ClientConn"><line style="stroke:#000000;stroke-width:1;" x1="771.1602" x2="813.1602" y1="3666.9487" y2="3666.9487"/><line style="stroke:#000000;stroke-width:1;" x1="813.1602" x2="813.1602" y1="3666.9487" y2="3679.9487"/><line style="stroke:#000000;stroke-width:1;" x1="772.1602" x2="813.1602" y1="3679.9487" y2="3679.9487"/><polygon fill="#000000" points="782.1602,3675.9487,772.1602,3679.9487,782.1602,3683.9487,778.1602,3679.9487" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="306.1538" x="778.1602" y="3662.2192">CONNECTION_EVENT_SHUTDOWN_COMPLETE</text></g><path d="M1106.1538,3637.8501 L1106.1538,3694.8501 L1331.1538,3694.8501 L1331.1538,3647.8501 L1321.1538,3637.8501 L1106.1538,3637.8501" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1321.1538,3637.8501 L1321.1538,3647.8501 L1331.1538,3647.8501 L1321.1538,3637.8501" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="171.063" x="1112.1538" y="3655.9199">Client Shutdown Event:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.6738" x="1112.1538" y="3671.7192">Connection shutdown complete</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.3657" x="1112.1538" y="3687.5186">Cleanup phase initiated</text><g class="message" data-participant-1="ClientConn" data-participant-2="ClientConn"><line style="stroke:#000000;stroke-width:1;" x1="771.1602" x2="813.1602" y1="3742.2463" y2="3742.2463"/><line style="stroke:#000000;stroke-width:1;" x1="813.1602" x2="813.1602" y1="3742.2463" y2="3755.2463"/><line style="stroke:#000000;stroke-width:1;" x1="772.1602" x2="813.1602" y1="3755.2463" y2="3755.2463"/><polygon fill="#000000" points="782.1602,3751.2463,772.1602,3755.2463,782.1602,3759.2463,778.1602,3755.2463" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.5869" x="778.1602" y="3721.7175">State:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="818.7471" y="3721.7175">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.415" x="823.3174" y="3721.7175">DRAINING</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="891.7324" y="3721.7175">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="19.5635" x="896.3027" y="3721.7175">&#226;&#8224;&#8217;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53.6694" x="820.1785" y="3737.5168">CLOSED</text></g><path d="M937.7061,3705.248 L937.7061,3762.248 L1108.7061,3762.248 L1108.7061,3715.248 L1098.7061,3705.248 L937.7061,3705.248" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1098.7061,3705.248 L1098.7061,3715.248 L1108.7061,3715.248 L1098.7061,3705.248" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129.9111" x="943.7061" y="3723.3179">Final Client State:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.3569" x="943.7061" y="3739.1172">Connection fully closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.3042" x="943.7061" y="3754.9165">Resources deallocated</text><g class="message" data-participant-1="ClientConn" data-participant-2="ClientCtrl"><polygon fill="#000000" points="161.1802,3812.1443,151.1802,3816.1443,161.1802,3820.1443,157.1802,3816.1443" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="155.1802" x2="765.1602" y1="3816.1443" y2="3816.1443"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.7441" x="399.0894" y="3795.6155">Connection</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="471.8335" y="3795.6155">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.8472" x="476.4038" y="3795.6155">closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.3315" x="422.0044" y="3811.4148">notification</text></g><path d="M776,3772.646 L776,3829.646 L992,3829.646 L992,3782.646 L982,3772.646 L776,3772.646" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M982,3772.646 L982,3782.646 L992,3782.646 L982,3772.646" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="110.5635" x="782" y="3790.7158">Client Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.5981" x="782" y="3806.5151">Notify application layer</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.3745" x="782" y="3822.3145">Shutdown sequence complete</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="3855.9436"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="3855.9436" y2="3855.9436"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="3858.9436" y2="3858.9436"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="188.8398" x="991.6287" y="3845.0439"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="170.3965" x="997.6287" y="3862.1138">Final Resource Cleanup</text><g class="message" data-participant-1="ClientCtrl" data-participant-2="ClientCtrl"><line style="stroke:#000000;stroke-width:1;" x1="150.1802" x2="192.1802" y1="3920.8416" y2="3920.8416"/><line style="stroke:#000000;stroke-width:1;" x1="192.1802" x2="192.1802" y1="3920.8416" y2="3933.8416"/><line style="stroke:#000000;stroke-width:1;" x1="151.1802" x2="192.1802" y1="3933.8416" y2="3933.8416"/><polygon fill="#000000" points="161.1802,3929.8416,151.1802,3933.8416,161.1802,3937.8416,157.1802,3933.8416" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.749" x="157.1802" y="3916.1121">Cleanup</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="209.9292" y="3916.1121">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="14.9424" x="214.4995" y="3916.1121">all</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="229.4419" y="3916.1121">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.0195" x="234.0122" y="3916.1121">resources</text></g><path d="M308.8516,3883.8433 L308.8516,3956.8433 L511.8516,3956.8433 L511.8516,3893.8433 L501.8516,3883.8433 L308.8516,3883.8433" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M501.8516,3883.8433 L501.8516,3893.8433 L511.8516,3893.8433 L501.8516,3883.8433" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="182.4507" x="314.8516" y="3901.9131">Client Resource Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="151.6392" x="314.8516" y="3917.7124">- Close MsQuic handles</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.2788" x="314.8516" y="3933.5117">- Free memory allocations</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.0469" x="314.8516" y="3949.311">- Reset connection state</text><g class="message" data-participant-1="ServerCtrl" data-participant-2="ServerList"><polygon fill="#000000" points="2105.1177,4014.4385,2115.1177,4018.4385,2105.1177,4022.4385,2109.1177,4018.4385" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="1971.7188" x2="2111.1177" y1="4018.4385" y2="4018.4385"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="46.3887" x="1983.7188" y="3997.9097">Update</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="2030.1074" y="3997.9097">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70.4399" x="2034.6777" y="3997.9097">connection</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="36.2388" x="2026.2988" y="4013.709">count</text></g><path d="M1740,3967.0405 L1740,4040.0405 L1966,4040.0405 L1966,3977.0405 L1956,3967.0405 L1740,3967.0405" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1956,3967.0405 L1956,3977.0405 L1966,3977.0405 L1956,3967.0405" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="116.3271" x="1746" y="3985.1104">Server Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205.48" x="1746" y="4000.9097">- Remove connection from pool</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.6978" x="1746" y="4016.709">- Update listener statistics</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.1914" x="1746" y="4032.5083">- Free server resources</text><g class="message" data-participant-1="ServerCtrl" data-participant-2="ServerCtrl"><line style="stroke:#000000;stroke-width:1;" x1="1971.7188" x2="2013.7188" y1="4087.2361" y2="4087.2361"/><line style="stroke:#000000;stroke-width:1;" x1="2013.7188" x2="2013.7188" y1="4087.2361" y2="4100.2361"/><line style="stroke:#000000;stroke-width:1;" x1="1972.7188" x2="2013.7188" y1="4100.2361" y2="4100.2361"/><polygon fill="#000000" points="1982.7188,4096.2361,1972.7188,4100.2361,1982.7188,4104.2361,1978.7188,4100.2361" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.749" x="1978.7188" y="4082.5066">Cleanup</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="2031.4678" y="4082.5066">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="59.5854" x="2036.0381" y="4082.5066">complete</text></g><path d="M1757,4050.2378 L1757,4123.2378 L1966,4123.2378 L1966,4060.2378 L1956,4050.2378 L1757,4050.2378" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1956,4050.2378 L1956,4060.2378 L1966,4060.2378 L1956,4050.2378" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="188.2144" x="1763" y="4068.3076">Server Resource Cleanup:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.9277" x="1763" y="4084.1069">- All handles closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.2261" x="1763" y="4099.9063">- Memory freed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="186.3989" x="1763" y="4115.7056">- Ready for new connections</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="2162.0972" x="5" y="4149.3347"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="4149.3347" y2="4149.3347"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="2167.0972" y1="4152.3347" y2="4152.3347"/><rect fill="#FFFFFF" height="23.7993" style="stroke:#000000;stroke-width:1;" width="230.9946" x="970.5513" y="4138.4351"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="212.5513" x="976.5513" y="4155.5049">Graceful Shutdown Complete</text><path d="M10,4177.2344 L10,4455.2344 L2157,4455.2344 L2157,4187.2344 L2147,4177.2344 L10,4177.2344" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M2147,4177.2344 L2147,4187.2344 L2157,4187.2344 L2147,4177.2344" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="316.0371" x="921.03" y="4195.3042">Graceful Shutdown Successfully Completed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="921.03" y="4211.1035">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="139.2358" x="921.03" y="4226.9028">Key Achievements:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="283.9497" x="921.03" y="4242.7021">- All WebTransport streams properly closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="257.9434" x="921.03" y="4258.5015">- Session termination handled correctly</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="312.1523" x="921.03" y="4274.3008">- Data loss prevented through acknowledgment</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="264.145" x="921.03" y="4290.1001">- QUIC connection gracefully terminated</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="228.2744" x="921.03" y="4305.8994">- All resources properly cleaned up</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.5703" x="921.03" y="4321.6987">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="141.7622" x="921.03" y="4337.498">Timeline Summary:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="214.3413" x="921.03" y="4353.2974">1. Application initiated shutdown</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="257.8799" x="921.03" y="4369.0967">2. WebTransport session drain signaled</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="204.1533" x="921.03" y="4384.896">3. All streams gracefully closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.7666" x="921.03" y="4400.6953">4. Session officially terminated</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="220.0986" x="921.03" y="4416.4946">5. Data acknowledgment ensured</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="222.2378" x="921.03" y="4432.2939">6. QUIC connection cleanly closed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="195.0635" x="921.03" y="4448.0933">7. Resources fully deallocated</text><!--SRC=[dLhTRkF65RxNKqptejWricxI92smm1QGPUt6o5fo96sC0W8CBZcI1gQ634cjLxtAQ_GkoAlqJV8aFNFcXsT-AAkziyZv-SxVDzyP-a_TZkyvgyjCo57xA6ITDTcUjVoN0vSvl-Ljcstvk1HRoN8kEzwGKVliYncm5F_Yx9lllnwDEj6Ld4tbBeFf1RlddrPD9jkwQZhslibolZcKRBaxT4Nr9DdTBclvQ9JbNTMm5vDIm1PiNDSlMDOo_HD-ZM2xJkIYpk2j6RMMaqfsJLMMl26Z9rrJfeVVhzWIm8fAak7tA_DiU4xNy6pVaZdcYJ_Zfuyt4uGaUTx1UclvKez-HS71Qt_QZ7TFLVE8O-3lPzTSykOpR_IQ-kzuJVqy0gyV9y7J6SH5-l60Y-oS80e6L1G5E_o3Q3iklS7gqMZqzgsAUodoJ9dARgJeHDP11hbSUVjsD78fmLx_WqISlN73NhuQoQhZh17RNGVFwQADokgsQzToQpEnDTFiqhXQkFOLtmhfXhhYy3Uwk718bnslspSN5slvpILRGkbai95s8YiQgBIr_EibR56rt2-GLaTdBR-5ULmMRbQkngxbTtQMIWsMaypuNhtXcJpKO6LR7PgSj-XKRtqJINQjG5XalLzzurtWmJWR3jyCLRVYiteSLbFe6M_VkwO2TDf1hy5PLSsoFETr9-IMIVxKk-4rZEMGHvpnBv0bwhrvnpP06CehXuRZAjeM0Gm5wTPL39XgBoHWiyRrvYGjH7VVhnwk5-ERsSDokbpUp6Sip-hsK4QH3iSPKwYlNxSrpyL6vDfLh4M0QjIuBAkdblKfQ31On1XFi9npi32Jh3Ok81OdRGB-073dck2b0ABU2rmARPdeIQmxrZnUSorlPA6AYhV4uvYZrXhCFLtVRC5pBZx3s2Zj56H07X1Doef6hr7qAHUo4zfNyetDEDpQIpX87nEeSVuegwUI5riUXUUEk7iWD9DgNvSSjgiXQLHILZLly2tKN6XCqZw3oDiyi413Nt389jdouM994mW16PGE0KlDxPa6MUI47UO8GIlCtBWcmt3ehVK4tDmOz4v8qUvWT-r8wz0YwpAAxjtDZ6r0Sd34F9Lg2nm4ph2Xt4CU9YXFx-oanqJZ8woN88RUH4stMLac_HmIe3rTG_hJ6EpMywRWZJqUFafHY4RJk3ech2j5qtPuJ5obtkC9CNxAH1SueBLMMHCIDY7LAO-2oSgozYHgDJ1WR3M_uNl8JnMhJuVDXZTmKjkWkVKnOceNdkKxiuqQS9irZnXovapJx54aq6jQ8s1q7eHeRmzb9o3XSKZ4P_qyJ59bDOOEpevaN0bx1S7hkIHciDx53itTTBe04fjTFon_-BYwdj_F6F-CSGg8p4kTaCOCXYdEH8CIwu9XQucUJfXawvauDgvcpKbzIYXVXeX8EgJvr38rJYRfeddCFNNqX5NSaO2T0JLUCa3f5mqCGA36cohpMbi0Gid181TLYf2KJG3IIRaW2Boq3EEdtdjChXxuXQl3DqWqc90wA6D_tf-jAnLoaf9nrJie8MMSfYjG-C16-vwrnmCWrn88jZoQKcQVQ0pAund4DEx9YDcqVfZCR-y-J5VJGPHuNjb492jGCEhTmkfYLd00L2dzWY-kaC1WGiEJ31IBHRgD8IvOCtqMF9_DPvWzG0YnyQcu97s0nkhor5R1qEA8gK_KpY3wyxtXqzjWIxBgDprzDaUYVV9Xlfm-t4-lLelnR7atNwoiQXngG_IX_auLR2z3ij1vfFKoJSQDpCj3qMibtZHAyLG53uLZtvhvtXoKxSD6Q68vPGgWGpDIyDUosa0J8bG5zZrHSK9wdq3YH7Ww9-D86k_QayNhPhLTU1IeB6RGkThtRGSOgKk9Exqkw2oj7ItVDyYX7TQdjAgk7Ld4-FgbTJtkixg6Kn4Fk7TGO8ajpqriiXEOC9_DffFLz9hzv_S_VltjZr__hSDq7TDEtn2Tvvt_PwUmzL95_SDgTVUNRzdx-VX-_4ys_PBlCWbguEMyrWV0Awpg_dgeHwDki6mjUwk44WclkloGcUreAPibeXiUqkBrtQkii8Uo5qEcjTB4QFfqrpwvGQhNDUh5MQHiSCNi-uBKhyFTN-fvJJ6QuCyM5kjQaYh0crXib7G3sU55XtVo6xVwgyLjDBcP32Z6tCQQcP7ccuMkK-xIdfjQb_MjfYfXU7GunPIkh26ThfKg39JElMftXcwhp5KTZb7hffh3qC16TE3RKa-w0uTMXJ7ET9XAZWKBQGlTDdWHDvxyIBfJi4xfT3qHJ0AzSS1O1PStIVotbHGTNLU5zX19DFN63EqZCjdn_D5IKS9-DUPdi79pz0WLmeRHQQgIcDvc6suHiqu0esz76aMboBvFcw_yCWPiYQXfvogOLrK7kbeKK7pyf9C_SV0lPxNAEuwN0ay2fWxa2_gBL5NygO4aZYbMhqx6AHJHgQkSGdHn8SWf5yiW-pIPGWkdjqwBXIJQvI1RuxNPpUnzbEpz9ZXPzyWz_lwduZUa5NrdX4SThTWDQgKmcJq2DBX0CppWwP7MC3fcmL3T7k75WRvy30UivTJ9hZTiDd-OBXRp1NlvzQkr19-sO0zxyJva_nUqfQU-eEdXQIBZwSYK0H54rjJoCY3C295bJkYQcceF_aIsTQi71uj_L9uP_RXhI0JUYRC8rrGTCa4gdCH5V3NzUJfRFJpRpTWzyMOZT9dze47g8qn7J4KdhiBBorFEivwAT4vmtO4xw3c8YH2drr-gEc_yxce0XYRwYSzZq2_3nkfxWIx-I6qbn8_rpunCH90BlWUIPfXN-fgB-13Eg8zreUMilWxHSONoC2U-byfwYsV8yzp0H-B2Ju3GmoubhTpgSw9M7uv179clXEUGvUc8zz1qo2t0voEVl5SO0FI_nlvPTKPx5So38yl85yyoEwglhilmqoKHi11tRR6r8nNqb5InmpAQ-GCmmxMjOa6cl6r_EeYSGSDGbBpldVQGnSsH6PVQxnMm4h1qI0dfpa9zMGOK9jsfSgWELWw67Ea3D9L4vP8gghhIMiciN9gFseX5IT-STe2uB6a0apsGxr8NdIJ40MSg1Z8-9FhZLdlHNVVqiaEfTq8Bc0cnR7Btj2eRGlqthkklV5z3InOjiJpaYjPrrTZrK0okvSN5Z_m8GdydG3JltVNsYSii48JGLNWtUyluCvtnH04MDkeIiZnYB-yaUQr5EWpeTarrsEuIMZduoEvQIkycnMBjkPy0XF303eTQMxeIUruA2On-sE-pvcW_0T5_KN2CviWFFm8bRwRenqC5H7qI8XgKmBMk-kxI-IfvBOJ_Ht0TTmv6giFxlrr6Ra4poIP_lwJNZBW_9SR_0W00]--></g></svg>